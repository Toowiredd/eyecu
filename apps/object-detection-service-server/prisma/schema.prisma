datasource db {
  provider = "postgresql"
  url      = env("DB_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Image {
  id               String           @id @default(cuid())
  createdAt        DateTime         @default(now())
  updatedAt        DateTime         @updatedAt
  url              String?
  detectedObject   DetectedObject?  @relation(name: "DetectedObjectOnImages", fields: [detectedObjectId], references: [id])
  detectedObjectId String?
  detectedObjects  DetectedObject[] @relation(name: "DetectedObjectsOnImage")
  objectCounts     ObjectCount[]
}

model DetectedObject {
  id              String   @id @default(cuid())
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  name            String?
  confidenceScore Float?
  boundingBox     Json?
  images          Image[]  @relation(name: "DetectedObjectOnImages")
  image           Image?   @relation(name: "DetectedObjectsOnImage", fields: [imageId], references: [id])
  imageId         String?
}

model ObjectCount {
  id         String   @id @default(cuid())
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  objectName String?
  count      Int?
  image      Image?   @relation(fields: [imageId], references: [id])
  imageId    String?
}
